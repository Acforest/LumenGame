(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin_user"],{"1b62":function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var a=r("1da1"),s=(r("96cf"),{data:function(){return{query:{page:1,size:10,keyword:null},total:0}},methods:{handleSizeChange:function(e,t){this.query.size=t,e()},handleCurrentChange:function(e,t){this.query.page=t,e()},clearIpt:function(e){this.query.keyword=null,e()},deleteById:function(e,t,r,s){var i=this;this.$confirm("此操作将永久删除该"+s+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then(Object(a["a"])(regeneratorRuntime.mark((function a(){var s,n,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e(r);case 2:s=a.sent,n=s.success,l=s.message,n?(i.$message.success("删除成功"),t()):i.$message.error(l);case 6:case"end":return a.stop()}}),a)})))).catch((function(){i.$message.info("已取消删除")}))},clearDialog:function(e){this.$refs[e].resetFields()},showMsgBySuccess:function(e,t,r){e?(this.$message.success("".concat(t,"成功!")),r()):this.$message.error("".concat(t,"失败!"))}}})},"4ca1":function(e,t,r){"use strict";r("bb7b")},8567:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"user"},[r("el-card",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("用户管理")]),r("el-breadcrumb-item",[e._v("用户列表")])],1),r("el-divider"),r("el-row",{staticClass:"top-search",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-input",{staticClass:"search-ipt",attrs:{placeholder:"请输入内容",clearable:!0},on:{clear:function(t){return e.fetchUser()}},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fetchUser()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.clearIpt(e.fetchUser)}]},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}},[r("i",{staticClass:"el-input__icon el-icon-search search-icon",attrs:{slot:"prefix"},slot:"prefix"})])],1),r("el-col",{attrs:{span:6,offset:12}})],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.userList,stripe:""}},[r("el-table-column",{attrs:{prop:"avatarImgUrl",label:"头像",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[a.avatarImgUrl?r("el-avatar",{attrs:{src:e.bindURL(a.avatarImgUrl)}}):e._e()]}}])}),r("el-table-column",{attrs:{prop:"username",label:"账号","min-width":"100"}}),r("el-table-column",{attrs:{prop:"name",label:"用户名","min-width":"100"}}),r("el-table-column",{attrs:{prop:"phone",label:"手机","min-width":"100"}}),r("el-table-column",{attrs:{prop:"qq",label:"qq","min-width":"100"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱","min-width":"100"}}),r("el-table-column",{attrs:{prop:"level",label:"身份","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[e.levelName[a.level]?r("el-tag",{attrs:{type:e.levelName[a.level].type}},[e._v(" "+e._s(e.levelName[a.level].name)+" ")]):e._e()]}}])}),r("el-table-column",{attrs:{label:"操作","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showEditUserDialog(a)}}},[e._v("编辑 ")]),r("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(t){return e.resetPassword(a.id)}}},[e._v("重置 ")]),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteById(e._deleteUser,e.fetchUser,a.id,"用户")}}},[e._v("删除 ")])]}}])})],1),r("el-pagination",{attrs:{"page-sizes":[1,2,5,10],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":function(t){return e.handleSizeChange(e.fetchUser,t)},"current-change":function(t){return e.handleCurrentChange(e.fetchUser,t)}}})],1),r("el-dialog",{staticClass:"edit-dialog",attrs:{title:"修改用户",visible:e.editDialogVisible,width:"30%","close-on-click-modal":!1},on:{"update:visible":function(t){e.editDialogVisible=t},close:function(t){return e.clearDialog("editUserForm")}}},[r("el-form",{ref:"editUserForm",staticClass:"edit-form",attrs:{model:e.editUserForm,rules:e.editUserRules,size:"mini","hide-required-asterisk":!0}},[r("el-form-item",{attrs:{label:"账号",prop:"username"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editUserForm.username,callback:function(t){e.$set(e.editUserForm,"username",t)},expression:"editUserForm.username"}})],1),r("el-form-item",{attrs:{label:"用户名",prop:"name"}},[r("el-input",{model:{value:e.editUserForm.name,callback:function(t){e.$set(e.editUserForm,"name",t)},expression:"editUserForm.name"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.editUserForm.email,callback:function(t){e.$set(e.editUserForm,"email",t)},expression:"editUserForm.email"}})],1),r("el-form-item",{attrs:{label:"手机号码",prop:"phone"}},[r("el-input",{model:{value:e.editUserForm.phone,callback:function(t){e.$set(e.editUserForm,"phone",t)},expression:"editUserForm.phone"}})],1),r("el-form-item",{attrs:{label:"qq",prop:"qq"}},[r("el-input",{model:{value:e.editUserForm.qq,callback:function(t){e.$set(e.editUserForm,"qq",t)},expression:"editUserForm.qq"}})],1),r("el-form-item",{attrs:{label:"身份",prop:"level"}},[r("br"),r("el-radio",{attrs:{label:0},model:{value:e.editUserForm.level,callback:function(t){e.$set(e.editUserForm,"level",t)},expression:"editUserForm.level"}},[e._v("用户")]),r("el-radio",{attrs:{label:1},model:{value:e.editUserForm.level,callback:function(t){e.$set(e.editUserForm,"level",t)},expression:"editUserForm.level"}},[e._v("管理员")]),r("el-radio",{attrs:{label:2},model:{value:e.editUserForm.level,callback:function(t){e.$set(e.editUserForm,"level",t)},expression:"editUserForm.level"}},[e._v("超级管理员")])],1),r("el-form-item",{attrs:{label:"头像",prop:"avatarImgUrl"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.bindURL("/uploadfile"),"show-file-list":!1,"on-success":e.handleAvatarSuccess,name:"files"}},[e.editUserForm.avatarImgUrl?r("img",{staticClass:"avatar",attrs:{src:e.bindURL(e.editUserForm.avatarImgUrl)}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"个性签名",prop:"description"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},resize:"none",placeholder:"请输入内容"},model:{value:e.editUserForm.description,callback:function(t){e.$set(e.editUserForm,"description",t)},expression:"editUserForm.description"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"info",size:"small"},on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消 ")]),r("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.editUser("editUserForm")}}},[e._v("修 改 ")])],1)],1)],1)},s=[],i=r("1da1"),n=(r("96cf"),r("365c")),l=r("ed08"),o=r("1b62"),c=123456,u={data:function(){return{query:{page:1,size:10,keyword:null},userList:[{}],total:10,editDialogVisible:!1,editUserForm:{},editUserRules:{name:[{required:!0,message:"请输入用户名",trigger:"blur"}],email:[{validator:l["e"],trigger:"blur"}],phone:[{required:!0,message:"请输入手机号码",trigger:"blur"}],qq:[{required:!0,message:"请输入qq号码",trigger:"blur"}],level:[{required:!0,message:"请选择身份",trigger:"blur"}],avatarImgUrl:[{required:!0,message:"请选择头像",trigger:"blur"}]},levelName:[{name:"用户",type:"primary"},{name:"管理员",type:"warning"},{name:"超级管理员",type:"danger"}]}},methods:{bindURL:l["a"],_deleteUser:n["o"],fetchUser:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(n["_getUserList"])(e.query);case 2:r=t.sent,a=r.list,s=r.total,e.userList=a,e.total=s;case 7:case"end":return t.stop()}}),t)})))()},showEditUserDialog:function(e){this.editDialogVisible=!0,this.editUserForm=Object(l["b"])(e)},editUser:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(r){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(n["t"])(t.editUserForm);case 4:a=e.sent,s=a.success,s?(t.$message.success("修改成功"),t.fetchUser(),t.editDialogVisible=!1):t.$message.error("修改失败");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),console.log(this.editUserForm)},handleAvatarSuccess:function(e){this.editUserForm.avatarImgUrl=e},resetPassword:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:t.$confirm("此操作将重置密码, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then(Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(n["g"])({id:e,password:c});case 2:a=r.sent,s=a.success,s?t.$message.success("重置密码成功，密码为123456"):t.$message.error("重置密码失败");case 5:case"end":return r.stop()}}),r)})))).catch((function(){t.$message.info("已取消删除")}));case 1:case"end":return r.stop()}}),r)})))()}},mixins:[o["a"]],created:function(){this.fetchUser()}},m=u,d=(r("4ca1"),r("2877")),p=Object(d["a"])(m,a,s,!1,null,"d01d82f2",null);t["default"]=p.exports},bb7b:function(e,t,r){}}]);
//# sourceMappingURL=admin_user.f26ba24c.js.map