(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin_category"],{"1b62":function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var a=r("1da1"),o=(r("96cf"),{data:function(){return{query:{page:1,size:10,keyword:null},total:0}},methods:{handleSizeChange:function(e,t){this.query.size=t,e()},handleCurrentChange:function(e,t){this.query.page=t,e()},clearIpt:function(e){this.query.keyword=null,e()},deleteById:function(e,t,r,o){var n=this;this.$confirm("此操作将永久删除该"+o+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then(Object(a["a"])(regeneratorRuntime.mark((function a(){var o,s,i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,e(r);case 2:o=a.sent,s=o.success,i=o.message,s?(n.$message.success("删除成功"),t()):n.$message.error(i);case 6:case"end":return a.stop()}}),a)})))).catch((function(){n.$message.info("已取消删除")}))},clearDialog:function(e){this.$refs[e].resetFields()},showMsgBySuccess:function(e,t,r){e?(this.$message.success("".concat(t,"成功!")),r()):this.$message.error("".concat(t,"失败!"))}}})},"5c31":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"categoryDialogVisible"},[r("el-card",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("分类管理")]),r("el-breadcrumb-item",[e._v("分类列表")])],1),r("el-divider"),r("el-row",{staticClass:"top-search",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-input",{staticClass:"search-ipt",attrs:{placeholder:"请输入内容",clearable:!0},on:{clear:function(t){return e.fetchCategory()}},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fetchCategory()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.clearIpt(e.fetchCategory)}]},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}},[r("i",{staticClass:"el-input__icon el-icon-search search-icon",attrs:{slot:"prefix"},slot:"prefix"})])],1),r("el-col",{attrs:{span:6,offset:12}},[r("el-button",{staticClass:"el-icon-circle-plus-outline add-button",attrs:{size:"medium"},on:{click:function(t){return e.showCategoryDialog(0)}}},[e._v("添加分类 ")]),r("span")],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.categoryList,stripe:""}},[r("el-table-column",{attrs:{prop:"name",label:"游戏类型","min-width":"180"}}),r("el-table-column",{attrs:{prop:"description",label:"描述","min-width":"180"}}),r("el-table-column",{attrs:{prop:"createTime",label:"添加时间","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e._f("formatDate")(r.createTime))+" ")]}}])}),r("el-table-column",{attrs:{prop:"updateTime",label:"更新时间","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e._f("formatDate")(r.updateTime))+" ")]}}])}),r("el-table-column",{attrs:{label:"操作","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showCategoryDialog(1,a)}}},[e._v("修改 ")]),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteById(e._deleteCategory,e.fetchCategory,a.id,"分类")}}},[e._v("删除 ")])]}}])})],1),r("el-pagination",{attrs:{"page-sizes":[1,2,5,10],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":function(t){return e.handleSizeChange(e.fetchCategory,t)},"current-change":function(t){return e.handleCurrentChange(e.fetchCategory,t)}}})],1),r("el-dialog",{attrs:{title:0===e.categoryForm.flag?"添加类型":"修改类型",visible:e.categoryDialogVisible,width:"30%"},on:{"update:visible":function(t){e.categoryDialogVisible=t},close:function(t){return e.clearDialog("categoryForm")}}},[r("el-form",{ref:"categoryForm",attrs:{model:e.categoryForm,rules:e.categoryRules,"hide-required-asterisk":!0}},[r("el-form-item",{attrs:{label:"分类名",prop:"name"}},[r("el-input",{model:{value:e.categoryForm.name,callback:function(t){e.$set(e.categoryForm,"name",t)},expression:"categoryForm.name"}})],1),r("el-form-item",{attrs:{label:"分类简介",prop:"description"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",resize:"none"},model:{value:e.categoryForm.description,callback:function(t){e.$set(e.categoryForm,"description",t)},expression:"categoryForm.description"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.categoryDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitCategory(e.categoryForm.flag)}}},[e._v(" "+e._s(["添 加","修 改"][e.categoryForm.flag])+" ")])],1)],1)],1)},o=[],n=r("1da1"),s=(r("96cf"),r("1b62")),i=r("365c"),c=r("ed08"),l=0,u=1,g={data:function(){return{categoryList:[],categoryForm:{},categoryRules:{name:[{required:!0,message:"请输入游戏分类",trigger:"blur"}],description:[{required:!0,message:"请输入分类说明",trigger:"blur"}]},categoryDialogVisible:!1}},methods:{_deleteCategory:i["h"],fetchCategory:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["v"])(e.query);case 2:r=t.sent,a=r.list,o=r.total,e.total=o,e.categoryList=a;case 7:case"end":return t.stop()}}),t)})))()},showCategoryDialog:function(e,t){this.categoryDialogVisible=!0,e===l||e===u&&(this.categoryForm=Object(c["b"])(t)),this.categoryForm.flag=e},submitCategory:function(e){var t=this;this.$refs.categoryForm.validate(function(){var r=Object(n["a"])(regeneratorRuntime.mark((function r(a){var o,n,s,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(a){r.next=2;break}return r.abrupt("return");case 2:if(t.categoryForm.updateTime=Date.now(),e!==l){r.next=12;break}return t.categoryForm.id=Date.now()%999999999,r.next=7,Object(i["a"])(t.categoryForm);case 7:o=r.sent,n=o.success,n?(t.$message.success("添加成功"),t.categoryDialogVisible=!1,t.fetchCategory()):t.$message.error("添加失败"),r.next=18;break;case 12:if(e!==u){r.next=18;break}return r.next=15,Object(i["p"])(t.categoryForm);case 15:s=r.sent,c=s.success,c?(t.$message.success("修改成功"),t.categoryDialogVisible=!1,t.fetchCategory()):t.$message.error("修改失败");case 18:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}},mixins:[s["a"]],created:function(){this.fetchCategory()}},m=g,f=(r("d920"),r("2877")),d=Object(f["a"])(m,a,o,!1,null,"012c412b",null);t["default"]=d.exports},d920:function(e,t,r){"use strict";r("e611")},e611:function(e,t,r){}}]);
//# sourceMappingURL=admin_category.41c81a79.js.map