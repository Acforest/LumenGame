(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["admin_game"],{"051f":function(e,t,r){"use strict";r("e9a0")},"057f":function(e,t,r){var n=r("fc6a"),a=r("241c").f,o={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return a(e)}catch(t){return i.slice()}};e.exports.f=function(e){return i&&"[object Window]"==o.call(e)?s(e):a(n(e))}},"159b":function(e,t,r){var n=r("da84"),a=r("fdbc"),o=r("17c2"),i=r("9112");for(var s in a){var c=n[s],l=c&&c.prototype;if(l&&l.forEach!==o)try{i(l,"forEach",o)}catch(u){l.forEach=o}}},"17c2":function(e,t,r){"use strict";var n=r("b727").forEach,a=r("a640"),o=a("forEach");e.exports=o?[].forEach:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}},"1b62":function(e,t,r){"use strict";r.d(t,"a",(function(){return a}));var n=r("1da1"),a=(r("96cf"),{data:function(){return{query:{page:1,size:10,keyword:null},total:0}},methods:{handleSizeChange:function(e,t){this.query.size=t,e()},handleCurrentChange:function(e,t){this.query.page=t,e()},clearIpt:function(e){this.query.keyword=null,e()},deleteById:function(e,t,r,a){var o=this;this.$confirm("此操作将永久删除该"+a+", 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error",center:!0}).then(Object(n["a"])(regeneratorRuntime.mark((function n(){var a,i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e(r);case 2:a=n.sent,i=a.success,s=a.message,i?(o.$message.success("删除成功"),t()):o.$message.error(s);case 6:case"end":return n.stop()}}),n)})))).catch((function(){o.$message.info("已取消删除")}))},clearDialog:function(e){this.$refs[e].resetFields()},showMsgBySuccess:function(e,t,r){e?(this.$message.success("".concat(t,"成功!")),r()):this.$message.error("".concat(t,"失败!"))}}})},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));r("b64b"),r("a4d3"),r("4de4"),r("e439"),r("159b"),r("dbb4");function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"746f":function(e,t,r){var n=r("428f"),a=r("5135"),o=r("e538"),i=r("9bf2").f;e.exports=function(e){var t=n.Symbol||(n.Symbol={});a(t,e)||i(t,e,{value:o.f(e)})}},"8e85":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"game"},[r("el-card",[r("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("游戏管理")]),r("el-breadcrumb-item",[e._v("游戏列表")])],1),r("el-divider"),r("el-row",{staticClass:"top-search",attrs:{gutter:20}},[r("el-col",{attrs:{span:6}},[r("el-input",{staticClass:"search-ipt",attrs:{placeholder:"请输入内容",clearable:!0},on:{clear:function(t){return e.fetchGame()}},nativeOn:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.fetchGame()},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.clearIpt(e.fetchGame)}]},model:{value:e.query.keyword,callback:function(t){e.$set(e.query,"keyword",t)},expression:"query.keyword"}},[r("i",{staticClass:"el-input__icon el-icon-search search-icon",attrs:{slot:"prefix"},slot:"prefix"})])],1),r("el-col",{attrs:{span:6,offset:12}},[r("el-button",{staticClass:"el-icon-circle-plus-outline add-button",attrs:{size:"medium"},on:{click:function(t){return e.showGameDialog(0)}}},[e._v("添加游戏 ")]),r("span")],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.gameList,stripe:""}},[r("el-table-column",{attrs:{prop:"name",label:"名称","min-width":"100"}}),r("el-table-column",{attrs:{prop:"description",label:"描述","min-width":"150"}}),r("el-table-column",{attrs:{prop:"lx",label:"游戏类型","min-width":"80"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e.getCategoryNameById(r.lx))+" ")]}}])}),r("el-table-column",{attrs:{prop:"createTime",label:"添加时间","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e._f("formatDate")(r.createTime))+" ")]}}])}),r("el-table-column",{attrs:{prop:"updateTime",label:"修改时间","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var r=t.row;return[e._v(" "+e._s(e._f("formatDate")(r.createTime))+" ")]}}])}),r("el-table-column",{attrs:{label:"操作","min-width":"100"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.showGameDialog(1,n)}}},[e._v("编辑 ")]),r("el-button",{attrs:{type:"success",size:"small"},on:{click:function(t){return e.goGameDetail(n)}}},[e._v("详情 ")]),r("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(t){return e.deleteById(e._deleteGame,e.fetchGame,n.id,"游戏")}}},[e._v("删除")])]}}])})],1),r("el-pagination",{attrs:{"page-sizes":[1,2,5,10],layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":function(t){return e.handleSizeChange(e.fetchGame,t)},"current-change":function(t){return e.handleCurrentChange(e.fetchGame,t)}}})],1),r("el-dialog",{staticClass:"game-dialog",attrs:{title:0===e.gameForm.flag?"添加游戏":"修改游戏",visible:e.gameDialogVisible,width:"30%"},on:{"update:visible":function(t){e.gameDialogVisible=t},close:function(t){return e.clearDialog("gameForm")}}},[r("el-form",{ref:"gameForm",staticClass:"game-form",attrs:{model:e.gameForm,rules:e.gameRules,size:"small","hide-required-asterisk":!0}},[r("el-form-item",{attrs:{label:"游戏名",prop:"name"}},[r("el-input",{model:{value:e.gameForm.name,callback:function(t){e.$set(e.gameForm,"name",t)},expression:"gameForm.name"}})],1),r("el-form-item",{attrs:{label:"游戏简介",prop:"description"}},[r("el-input",{attrs:{type:"textarea",autosize:{minRows:2,maxRows:4},placeholder:"请输入内容",resize:"none"},model:{value:e.gameForm.description,callback:function(t){e.$set(e.gameForm,"description",t)},expression:"gameForm.description"}})],1),r("el-form-item",{attrs:{label:"游戏类型",prop:"lx"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.gameForm.lx,callback:function(t){e.$set(e.gameForm,"lx",t)},expression:"gameForm.lx"}},e._l(e.miniCategory,(function(e){return r("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{label:"游戏封面",prop:"photo"}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.bindURL("/uploadfile"),"show-file-list":!1,"on-success":e.handleAvatarSuccess,name:"files"}},[e.gameForm.photo?r("img",{staticClass:"avatar",attrs:{src:e.bindURL(e.gameForm.photo)}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{label:"游戏公司",prop:"company"}},[r("el-input",{model:{value:e.gameForm.company,callback:function(t){e.$set(e.gameForm,"company",t)},expression:"gameForm.company"}})],1),r("el-form-item",{attrs:{label:"游戏链接",prop:"url"}},[r("el-input",{model:{value:e.gameForm.url,callback:function(t){e.$set(e.gameForm,"url",t)},expression:"gameForm.url"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{size:"small"},on:{click:function(t){e.gameDialogVisible=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){return e.submitGame(e.gameForm.flag)}}},[e._v(" "+e._s(["添 加","修 改"][e.gameForm.flag])+" ")])],1)],1)],1)},a=[],o=r("1da1"),i=r("5530"),s=(r("96cf"),r("365c")),c=r("1b62"),l=r("2f62"),u=r("ed08"),f=0,m=1,g={data:function(){return{gameList:[],gameRules:{name:[{required:!0,message:"请输入游戏名",trigger:"blur"}],description:[{required:!0,message:"请输入游戏简介",trigger:"blur"}],company:[{required:!0,message:"请输入游戏公司",trigger:"blur"}],lx:[{required:!0,message:"请选择游戏类型",trigger:"blur"}],photo:[{required:!0,message:"请选择游戏封面",trigger:"blur"}],url:[{required:!0,message:"请输入游戏链接",trigger:"blur"}]},gameForm:{},gameDialogVisible:!1}},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])({},Object(l["b"])(["fetchAllCategory"])),Object(l["d"])(["setCurrentGame"])),{},{_deleteGame:s["_deleteGame"],bindURL:u["a"],fetchGame:function(){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(s["_getGameList"])(e.query);case 2:r=t.sent,n=r.list,a=r.total,e.gameList=n,e.total=a;case 7:case"end":return t.stop()}}),t)})))()},showGameDialog:function(e,t){this.gameDialogVisible=!0,e===f||e===m&&(this.gameForm=Object(u["b"])(t),this.gameForm.lx=parseInt(this.gameForm.lx)),this.gameForm.flag=e},submitGame:function(e){var t=this;this.$refs.gameForm.validate(function(){var r=Object(o["a"])(regeneratorRuntime.mark((function r(n){var a,o,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(n){r.next=2;break}return r.abrupt("return");case 2:if(e!==f){r.next=12;break}return t.gameForm.updateTime=Date.now(),t.gameForm.id=Date.now()%999999999,r.next=7,Object(s["_addGame"])(t.gameForm);case 7:a=r.sent,o=a.success,t.showMsgBySuccess(o,"添加",t.fetchGame),r.next=21;break;case 12:if(e!==m){r.next=20;break}return r.next=15,Object(s["_editGame"])(t.gameForm);case 15:i=r.sent,c=i.success,t.showMsgBySuccess(c,"修改",t.fetchGame),r.next=21;break;case 20:console.log("error");case 21:t.gameDialogVisible=!1;case 22:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())},goGameDetail:function(e){this.setCurrentGame(e),this.$router.push("/game/"+e.id)},handleAvatarSuccess:function(e){this.$set(this.gameForm,"photo",e)}}),computed:Object(i["a"])(Object(i["a"])({},Object(l["c"])(["getCategoryNameById","getMiniCategoryList"])),{},{miniCategory:function(){return this.getMiniCategoryList()}}),mixins:[c["a"]],created:function(){this.fetchGame(),this.fetchAllCategory()}},p=g,b=(r("051f"),r("2877")),d=Object(b["a"])(p,n,a,!1,null,"41fb30e8",null);t["default"]=d.exports},a4d3:function(e,t,r){"use strict";var n=r("23e7"),a=r("da84"),o=r("d066"),i=r("c430"),s=r("83ab"),c=r("4930"),l=r("fdbf"),u=r("d039"),f=r("5135"),m=r("e8b5"),g=r("861d"),p=r("825a"),b=r("7b0b"),d=r("fc6a"),h=r("c04e"),y=r("5c6c"),v=r("7c73"),w=r("df75"),O=r("241c"),k=r("057f"),j=r("7418"),x=r("06cf"),F=r("9bf2"),_=r("d1e7"),S=r("9112"),C=r("6eeb"),G=r("5692"),D=r("f772"),P=r("d012"),$=r("90e3"),z=r("b622"),E=r("e538"),q=r("746f"),R=r("d44e"),B=r("69f3"),L=r("b727").forEach,T=D("hidden"),I="Symbol",N="prototype",V=z("toPrimitive"),M=B.set,A=B.getterFor(I),J=Object[N],U=a.Symbol,Q=o("JSON","stringify"),W=x.f,H=F.f,K=k.f,X=_.f,Y=G("symbols"),Z=G("op-symbols"),ee=G("string-to-symbol-registry"),te=G("symbol-to-string-registry"),re=G("wks"),ne=a.QObject,ae=!ne||!ne[N]||!ne[N].findChild,oe=s&&u((function(){return 7!=v(H({},"a",{get:function(){return H(this,"a",{value:7}).a}})).a}))?function(e,t,r){var n=W(J,t);n&&delete J[t],H(e,t,r),n&&e!==J&&H(J,t,n)}:H,ie=function(e,t){var r=Y[e]=v(U[N]);return M(r,{type:I,tag:e,description:t}),s||(r.description=t),r},se=l?function(e){return"symbol"==typeof e}:function(e){return Object(e)instanceof U},ce=function(e,t,r){e===J&&ce(Z,t,r),p(e);var n=h(t,!0);return p(r),f(Y,n)?(r.enumerable?(f(e,T)&&e[T][n]&&(e[T][n]=!1),r=v(r,{enumerable:y(0,!1)})):(f(e,T)||H(e,T,y(1,{})),e[T][n]=!0),oe(e,n,r)):H(e,n,r)},le=function(e,t){p(e);var r=d(t),n=w(r).concat(pe(r));return L(n,(function(t){s&&!fe.call(r,t)||ce(e,t,r[t])})),e},ue=function(e,t){return void 0===t?v(e):le(v(e),t)},fe=function(e){var t=h(e,!0),r=X.call(this,t);return!(this===J&&f(Y,t)&&!f(Z,t))&&(!(r||!f(this,t)||!f(Y,t)||f(this,T)&&this[T][t])||r)},me=function(e,t){var r=d(e),n=h(t,!0);if(r!==J||!f(Y,n)||f(Z,n)){var a=W(r,n);return!a||!f(Y,n)||f(r,T)&&r[T][n]||(a.enumerable=!0),a}},ge=function(e){var t=K(d(e)),r=[];return L(t,(function(e){f(Y,e)||f(P,e)||r.push(e)})),r},pe=function(e){var t=e===J,r=K(t?Z:d(e)),n=[];return L(r,(function(e){!f(Y,e)||t&&!f(J,e)||n.push(Y[e])})),n};if(c||(U=function(){if(this instanceof U)throw TypeError("Symbol is not a constructor");var e=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,t=$(e),r=function(e){this===J&&r.call(Z,e),f(this,T)&&f(this[T],t)&&(this[T][t]=!1),oe(this,t,y(1,e))};return s&&ae&&oe(J,t,{configurable:!0,set:r}),ie(t,e)},C(U[N],"toString",(function(){return A(this).tag})),C(U,"withoutSetter",(function(e){return ie($(e),e)})),_.f=fe,F.f=ce,x.f=me,O.f=k.f=ge,j.f=pe,E.f=function(e){return ie(z(e),e)},s&&(H(U[N],"description",{configurable:!0,get:function(){return A(this).description}}),i||C(J,"propertyIsEnumerable",fe,{unsafe:!0}))),n({global:!0,wrap:!0,forced:!c,sham:!c},{Symbol:U}),L(w(re),(function(e){q(e)})),n({target:I,stat:!0,forced:!c},{for:function(e){var t=String(e);if(f(ee,t))return ee[t];var r=U(t);return ee[t]=r,te[r]=t,r},keyFor:function(e){if(!se(e))throw TypeError(e+" is not a symbol");if(f(te,e))return te[e]},useSetter:function(){ae=!0},useSimple:function(){ae=!1}}),n({target:"Object",stat:!0,forced:!c,sham:!s},{create:ue,defineProperty:ce,defineProperties:le,getOwnPropertyDescriptor:me}),n({target:"Object",stat:!0,forced:!c},{getOwnPropertyNames:ge,getOwnPropertySymbols:pe}),n({target:"Object",stat:!0,forced:u((function(){j.f(1)}))},{getOwnPropertySymbols:function(e){return j.f(b(e))}}),Q){var be=!c||u((function(){var e=U();return"[null]"!=Q([e])||"{}"!=Q({a:e})||"{}"!=Q(Object(e))}));n({target:"JSON",stat:!0,forced:be},{stringify:function(e,t,r){var n,a=[e],o=1;while(arguments.length>o)a.push(arguments[o++]);if(n=t,(g(t)||void 0!==e)&&!se(e))return m(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!se(t))return t}),a[1]=t,Q.apply(null,a)}})}U[N][V]||S(U[N],V,U[N].valueOf),R(U,I),P[T]=!0},b64b:function(e,t,r){var n=r("23e7"),a=r("7b0b"),o=r("df75"),i=r("d039"),s=i((function(){o(1)}));n({target:"Object",stat:!0,forced:s},{keys:function(e){return o(a(e))}})},dbb4:function(e,t,r){var n=r("23e7"),a=r("83ab"),o=r("56ef"),i=r("fc6a"),s=r("06cf"),c=r("8418");n({target:"Object",stat:!0,sham:!a},{getOwnPropertyDescriptors:function(e){var t,r,n=i(e),a=s.f,l=o(n),u={},f=0;while(l.length>f)r=a(n,t=l[f++]),void 0!==r&&c(u,t,r);return u}})},e439:function(e,t,r){var n=r("23e7"),a=r("d039"),o=r("fc6a"),i=r("06cf").f,s=r("83ab"),c=a((function(){i(1)})),l=!s||c;n({target:"Object",stat:!0,forced:l,sham:!s},{getOwnPropertyDescriptor:function(e,t){return i(o(e),t)}})},e538:function(e,t,r){var n=r("b622");t.f=n},e9a0:function(e,t,r){}}]);
//# sourceMappingURL=admin_game.00dfecd5.js.map